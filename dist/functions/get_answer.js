!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=13)}([function(e,t,r){const n=e=>Object.keys(e).map(t=>[t,e[t]]),o=a(e.exports.types={string:{to:25,from:null,serialize:e=>""+e},number:{to:1700,from:[20,21,23,26,700,701,790,1700],serialize:e=>""+e,parse:e=>+e},json:{to:3802,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:[16],serialize:e=>!0===e?"t":"f",parse:e=>"t"===e},date:{to:1184,from:[1082,1083,1114,1184],serialize:e=>e.toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:[17],serialize:e=>"\\x"+e.toString("hex"),parse:e=>Buffer.from(e.slice(2),"hex")}}),s=e.exports.serializers=o.serializers,i=e.exports.parsers=o.parsers;function a(e){return Object.keys(e).reduce((t,r)=>(e[r].from&&e[r].from.forEach(n=>t.parsers[n]=e[r].parse),t.serializers[e[r].to]=e[r].serialize,t),{parsers:{},serializers:{}})}e.exports.entries=n,e.exports.mergeUserTypes=function(e){const t=a(e||{});return{serializers:Object.assign({},s,t.serializers),parsers:Object.assign({},i,t.parsers)}};const u={number:1700,boolean:16};e.exports.escape=function(e){let t,r="",n=e[0]<10||"$"===e[0],o=0;for(let s=0;s<e.length;s++)t=e[s].charCodeAt(0),'"'===e[s]?(n=!0,r+=e.slice(o,s)+'"',o=s):(96===t||36!==t&&t<=47||t>=58&&t<=64||t>=91&&t<=94||t>=123&&t<=128)&&(n=!0);return(n?'"':"")+(n?r+e.slice(o,e.length):e)+(n?'"':"")},e.exports.inferType=function e(t){return t&&t.type||(t instanceof Date?1184:Array.isArray(t)?e(t[0]):t instanceof Buffer?17:u[typeof t]||0)};const c=/\\/g,l=/"/g;e.exports.arraySerializer=function e(t,r){if(!t.length)return"{}";const n=t[0];return Array.isArray(n)&&!n.type?"{"+t.map(t=>e(t,r)).join(",")+"}":"{"+t.map(e=>'"'+function(e){return e.replace(c,"\\\\").replace(l,'\\"')}(r?r(e.type?e.value:e):""+e)+'"').join(",")+"}"};const f={i:0,char:null,str:"",quoted:!1,last:0};e.exports.arrayParser=function(e,t){return f.i=f.last=0,function e(t,r,n){const o=[];for(;t.i<r.length;t.i++){if(t.char=r[t.i],t.quoted)"\\"===t.char?t.str+=r[++t.i]:'"'===t.char?(o.push(n?n(t.str):t.str),t.str="",t.quoted='"'===r[t.i+1],t.last=t.i+2):t.str+=t.char;else if('"'===t.char)t.quoted=!0;else if("{"===t.char)t.last=++t.i,o.push(e(t,r,n));else{if("}"===t.char){t.quoted=!1,t.last<t.i&&o.push(n?n(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1;break}","===t.char&&"}"!==t.p&&'"'!==t.p&&(o.push(n?n(r.slice(t.last,t.i)):r.slice(t.last,t.i)),t.last=t.i+1)}t.p=t.char}return t.last<t.i&&o.push(n?n(r.slice(t.last,t.i+1)):r.slice(t.last,t.i+1)),o}(f,e,t)},e.exports.toCamel=e=>{let t=e[0];for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},e.exports.toPascal=e=>{let t=e[0].toUpperCase();for(let r=1;r<e.length;r++)t+="_"===e[r]?e[++r].toUpperCase():e[r];return t},e.exports.toKebab=e=>e.replace(/_/g,"-"),e.exports.errors={connection:(e,t)=>Object.assign(new Error("write CONNECTION_"+e+" "+t.path||!1),{code:"CONNECTION_"+e,errno:"CONNECTION_"+e,address:t.path||t.host},t.path?{}:{port:t.port}),generic:e=>Object.assign(new Error(e.message),e),notSupported:e=>Object.assign(new Error(e+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED"})},e.exports.errorFields=n({S:"severity_local",V:"severity",C:"code",M:"message",D:"detail",H:"hint",P:"position",p:"internal_position",q:"internal_query",W:"where",s:"schema_name",t:"table_name",c:"column_name",d:"data type_name",n:"constraint_name",F:"file",L:"line",R:"routine"}).reduce((e,[t,r])=>(e[t.charCodeAt(0)]=r,e),{})},function(e,t){e.exports=function(){let e=[],t=0;return{get length(){return e.length-t},push:t=>e.push(t),peek:()=>e[t],shift:()=>{const r=e[t++];return t===e.length?(t=0,e=[]):e[t-1]=void 0,r}}}},function(e,t,r){const n=r(3),o=r(4),s=r(5),i=r(6),a=r(1),{mergeUserTypes:u,arraySerializer:c,arrayParser:l,inferType:f,toPascal:p,entries:y,toCamel:m,toKebab:d,errors:h,escape:g,types:S}=r(0),b={P:{},finally:E,then:E,catch:E};function E(){throw h.generic({message:"Query not called as a tagged template literal",code:"NOT_TAGGED_CALL"})}function P(e,t){if(arguments.length&&!e)throw new Error(e+" - is not a url or connection object");const r=w(e,t),n=Math.max(1,r.max),s=a(),u=[],p=a(),m={},d={},E={},P=/(^|[^)(])\s*insert\s+into\s+[^\s]+\s*$/i,A=/(^|[^)(])\s*select\s*$/i;let q,v,O=!1,x=null,j=n;function C(e){return z({},M(),e,Array.from(arguments).slice(1))}Object.assign(C,{options:Object.assign({},r,{pass:null}),parameters:{},listen:Q,begin:T,end:K}),H(C);const B=r.onparameter;return r.onparameter=(e,t)=>{C.parameters[e]!==t&&(C.parameters[e]=t,B&&B(e,t))},C;function T(e,t){return t||(t=e,e=""),new Promise((r,n)=>{const o=M(!0),s={resolve:r,reject:n,fn:t,begin:"begin "+e.replace(/[^a-z ]/gi,"")};o?_(s,o):p.push(s)})}function _({resolve:e,reject:t,fn:r,begin:n="",savepoint:o=""},i){function a(e){return z({},i,e,Array.from(arguments).slice(1))}n&&(i.savepoints=0),H(a,i),a.savepoint=(e,t)=>new Promise((r,n)=>{_({savepoint:"savepoint s"+i.savepoints+++"_"+(t?e:""),resolve:r,reject:n,fn:t||e},i)}),z({raw:!0},i,n||o).then(()=>{const e=r(a);return Array.isArray(e)?Promise.all(e):e}).then(t=>n?a`commit`.then(()=>e(t)):e(t)).catch(e=>{z({raw:!0},i,n?"rollback":"rollback to "+o).then(()=>t(e))}).then(n&&(()=>{s.push(i),I()}))}function I(){let e,t;for(;p.length&&(e=M(p.peek().fn))&&(t=p.shift());)t.fn?_(t,e):D(e,t.query,t.xs,t.args)}function z(e,t,n,o){if(!(e.raw||Array.isArray(n)&&Array.isArray(n.raw)))return N(n,o);const s=new Promise((s,i)=>{e.resolve=s,e.reject=i,null!==x?i(h.connection("ENDED",r)):O?D(t,e,n,o):G(t).then(()=>D(t,e,n,o)).catch(i)});return s.stream=t=>(e.stream=t,s),s}function N(e,t){const r=Object.create(b);return r.first=e,r.rest=t,r}function D(e,t,r,n){e?e.send(t,t.raw?$(r,n):W(t,r,n)):p.push({query:t,xs:r,args:n})}function M(e){const t=j?L(r):s.shift();return!e&&t&&s.push(t),t}function L(e){j--;const t=i(e);return u.push(t),t}function R(e){return{type:f(e)||25,array:!0,value:e}}function U(e){return{type:S.json.to,value:e}}function G(e){return q||(q=new Promise((t,r)=>{D(e,{resolve:t,reject:r,raw:!0},"\n          select oid, typelem\n          from pg_catalog.pg_type\n          where typcategory = 'A'\n        ")}).then(e=>{e.forEach(({oid:e,typelem:t})=>k(e,t)),O=!0}))}function k(e,t){const n=r.parsers[t];d[t]=e,r.parsers[e]=e=>l(e,n),r.parsers[e].array=!0,r.serializers[e]=e=>c(e,r.serializers[t])}function H(e,t){Object.assign(e,{types:{},notify:function(t,r){return e`select pg_notify(${t}, ${""+r})`},unsafe:function(e,r){return z({raw:!0,simple:!r,dynamic:!0},t||M(),e,r||[])},array:R,file:function(e,r,n={}){Array.isArray(r)||(n=r||{},r=null);"cache"in n==!1&&(n.cache=!0);const s=E[e],i={raw:!0,simple:!r};if(n.cache&&"string"==typeof s)return z(i,t||M(),s,r||[]);const a=(n.cache&&s||(E[e]=new Promise((t,r)=>{o.readFile(e,"utf8",(n,o)=>{if(n)return r(n);E[e]=o,t(o)})}))).then(e=>z(i,t||M(),e,r||[]));return a.stream=e=>(i.stream=e,a),a},json:U}),r.types&&y(r.types).forEach(([t,r])=>{e.types[t]=e=>({type:r.to,value:e})})}function Q(e,t){return e in m?(m[e].push(t),Promise.resolve(e)):(m[e]=[t],z({raw:!0},F(),"listen "+g(e)).then(()=>e))}function F(){return v||(v=i(Object.assign({},r,{onnotify:(e,t)=>e in m&&m[e].forEach(e=>e(t))})),u.push(v),v)}function K({timeout:e=null}={}){if(x)return x;let t;return x=0===e?Promise.all(u.map(e=>e.destroy())).then(()=>{}):Promise.race([Promise.all(u.map(e=>e.end()))].concat(e>0?new Promise(r=>t=setTimeout(()=>(u.map(e=>e.destroy()),r()),1e3*e)):[])).then(()=>clearTimeout(t))}function $(e,t=[]){const r=[],n=t.map(e=>{const t=re(e);return r.push(t.type),t});return{sig:r+e,str:e,args:n}}function W(e,t,r=[]){const n=[],o=[];let s,i=t[0];for(let e=1;e<t.length;e++)s=r[e-1],i+=(s&&s.P===b.P?V(i,s,n,o):ee(s,n,o))+t[e];return{sig:!e.dynamic&&!n.dynamic&&o+i,str:i.trim(),args:n}}function V(e,{first:t,rest:r},n,o){if(n.dynamic=!0,null!==t&&"object"==typeof t&&"string"!=typeof t[0]){if(P.test(e))return Y(t,r,n,o);if(A.test(e))return J(t,r,n,o);if(!Array.isArray(t))return X(t,r,n,o)}return Z(Array.isArray(t)?t:[t].concat(r))}function J(e,t,r,n){return y(e).reduce((e,[o,s])=>e+(!t.length||t.indexOf(o)>-1?(e?",":"")+ee(s,r,n)+" as "+g(o):""),"")}function Y(e,t,r,n){return e=Array.isArray(e)?e:[e],"("+Z(t=t.length?t:Object.keys(e[0]))+") values "+e.reduce((e,o)=>e+(e?",":"")+"("+t.reduce((e,t)=>e+(e?",":"")+ee(o[t],r,n),"")+")","")}function X(e,t,r,n){return(t.length?t:Object.keys(e)).reduce((t,o)=>t+(t?",":"")+g(o)+" = "+ee(e[o],r,n),"")}function Z(e){return e.reduce((e,t)=>e+(e?",":"")+g(t),"")}function ee(e,t,r){return Array.isArray(e)?e.reduce((e,n)=>e+(e?",":"")+te(n,t,r),""):te(e,t,r)}function te(e,t,r){const n=re(e),o=r.push(n.type);if(o>65534)throw h.generic({message:"Max number of parameters (65534) exceeded",code:"MAX_PARAMETERS_EXCEEDED"});return t.push(n),"$"+o}function re(e){if(null==e)return{type:0,value:e};const t=e.type?e.value:e,n=e.array?d[e.type]:e.type||f(t);return{type:n,value:(r.serializers[n]||S.string.serialize)(t)}}}function w(e,t){const r=process.env,o="string"==typeof e?s.parse(e,!0):{query:{},pathname:""},i=("string"==typeof e?t:e)||{},a=(o.auth||"").split(":"),c=i.hostname||i.host||o.hostname||r.PGHOST||"localhost",l=i.port||o.port||r.PGPORT||5432;return Object.assign({host:c,port:l,path:i.path||c.indexOf("/")>-1&&c+"/.s.PGSQL."+l,database:i.database||i.db||(o.pathname||"").slice(1)||r.PGDATABASE||"postgres",user:i.user||i.username||a[0]||r.PGUSERNAME||r.PGUSER||n.userInfo().username,pass:i.pass||i.password||a[1]||r.PGPASSWORD||"",max:i.max||o.query.max||Math.max(1,n.cpus().length),types:i.types||{},ssl:i.ssl||o.ssl||!1,timeout:i.timeout,onnotice:i.onnotice,onparameter:i.onparameter,transform:Object.assign({},i.transform),connection:Object.assign({application_name:"postgres.js"},i.connection),debug:i.debug},u(i.types))}Object.assign(P,{toPascal:p,toCamel:m,toKebab:d}),e.exports=P},function(e,t){e.exports=require("os")},function(e,t){e.exports=require("fs")},function(e,t){e.exports=require("url")},function(e,t,r){const n=r(7),o=r(8),s=r(9),i=r(12),a=r(1),{errors:u}=r(0);e.exports=function(e={}){const{onparameter:t,transform:r,timeout:l,onnotify:f,onnotice:p,parsers:y}=e;let m,d,h=Buffer.alloc(0),g=0,S=[],b=1,E=!1,P=!1,w={};const A=a(),q=c++,v={send:function(t,{sig:r,str:n,args:o=[]}){t.result=[],t.result.count=null,l&&clearTimeout(m),e.debug&&e.debug(q,n,o);const i=t.simple?function(e,t){return t.statement={},s.Query(e)}(n,t):r in w?function(e,t,r){return r.statement=e,s.Bind(e.name,t)}(w[r],o,t):function(e,t,r,n){return n.statement={name:e?"p"+b++:"",sig:e},Buffer.concat([s.Parse(n.statement.name,t,r),s.Bind(n.statement.name,r)])}(r,n,o,t);P?(x.query=t,P=!1):A.push(t),E?O.write(i):(S.push(i),O.connect())},end:function(){clearTimeout(m);const e=new Promise(e=>{d=()=>e(O.end())});x.query||0!==A.length||d();return e},destroy:function(){j(u.connection("DESTROYED",e)),O.destroy()}},O=function(e,{error:t,close:r,ready:s,data:i}){let a,u,c=!0,l=null;function f(){a.removeListener("data",i),a.removeListener("error",t),a.removeListener("connect",s),a.removeListener("secureConnect",s),c=!0,r()}function p(e){a=e,a.on("data",i),a.once("error",t),a.once("connect",s),a.once("secureConnect",s),a.once("close",f)}function y(){a.write(u),null!==l&&clearImmediate(l),u=l=null}return{ready:!1,write:e=>{if(u=u?Buffer.concat([u,e]):Buffer.from(e),u.length>=1024)return y();null===l&&(l=setImmediate(y))},destroy:()=>(a&&a.destroy(),Promise.resolve()),end:()=>new Promise(e=>a&&a.end(e)),connect:function(){if(!c)return;c=!1;const r=e.path?n.connect(e.path):n.connect(e.port,e.host);if(!e.ssl)return p(r);r.once("connect",()=>r.write(Buffer.from("0000000804d2162f","hex"))),r.once("error",t),r.once("close",f),r.once("data",n=>{r.removeListener("error",t),r.removeListener("close",f),"S"===n.toString()?p(o.connect(Object.assign({socket:r},e.ssl))):t("Server does not support SSL")})}}}(e,{ready:()=>O.write(s.connect(e)),data:function(e){h=0===h.length?e:Buffer.concat([h,e],h.length+e.length);for(;h.length>4&&(g=h.readInt32BE(1),!(g>=h.length));)x[h[0]](h.slice(0,g+1)),h=h.slice(g+1)},error:j,close:function(){j(u.connection("CLOSED",e)),w={},E=P=!1}}),x=i({onparse:function(){x.query&&x.query.statement.sig&&(w[x.query.statement.sig]=x.query.statement)},onparameter:t,transform:r,parsers:y,onnotify:f,onnotice:p,onready:function(e){if(e?x.query?x.query.reject(e):j(e):x.query&&x.query.resolve(x.query.results||x.query.result),x.query=x.error=null,l&&0===A.length&&C(),0===A.length&&d)return d();E||(S.forEach(O.write),S=[],E=!0);x.query=A.shift(),P=!x.query},onauth:function(t,r,n){Promise.resolve("function"==typeof e.pass?e.pass():e.pass).then(n=>O.write(s.auth(t,r,e,n))).catch(n)},error:j});function j(e){let t;for(;t=A.shift();)t.reject(e)}function C(){clearTimeout(m),m=setTimeout(O.end,1e3*l)}return v};let c=1},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("tls")},function(e,t,r){const n=r(10),o=r(11),{errors:s,entries:i}=r(0),a=String.fromCharCode(0),u=o.inc(5).str("D").i32(6).str("P").str(a).str("E").i32(9).z(5).str("H").i32(4).str("S").i32(4).end().slice(5),c={2:"KerberosV5",3:"CleartextPassword",5:"MD5Password",6:"SCMCredential",7:"GSS",8:"GSSContinue",9:"SSPI",10:"SASL",11:"SASLContinue",12:"SASLFinal"},l={3:function(e,t,r,n){return o.p().str(n).z(1).end()},5:function(e,t,r,n){return o.p().str("md5"+f(Buffer.concat([Buffer.from(f(n+r.user)),t.slice(9)]))).z(1).end()},10:function(e,t,r){o.p().str("SCRAM-SHA-256"+a);const s=o.i;return r.nonce=n.randomBytes(18).toString("base64"),o.inc(4).str("n,,n=*,r="+r.nonce).i32(o.i-s-4,s).end()},11:function(e,t,r,s){const i=t.utf8Slice(9).split(",").reduce((e,t)=>(e[t[0]]=t.slice(2),e),{}),a=n.pbkdf2Sync(s,Buffer.from(i.s,"base64"),parseInt(i.i),32,"sha256"),u=p(a,"Client Key"),c="n=*,r="+r.nonce+",r="+i.r+",s="+i.s+",i="+i.i+",c=biws,r="+i.r;return r.serverSignature=p(p(a,"Server Key"),c).toString("base64"),o.p().str("c=biws,r="+i.r+",p="+m(u,p(y(u),c)).toString("base64")).end()},12:function(e,t,r){if(t.utf8Slice(9).split(a,1)[0].slice(2)===r.serverSignature)return"";throw s.generic({message:"The server did not return the correct signature",code:"SASL_SIGNATURE_MISMATCH"})}};function f(e){return n.createHash("md5").update(e).digest("hex")}function p(e,t){return n.createHmac("sha256",e).update(t).digest()}function y(e){return n.createHash("sha256").update(e).digest()}function m(e,t){const r=Math.max(e.length,t.length),n=Buffer.allocUnsafe(r);for(let o=0;o<r;o++)n[o]=e[o]^t[o];return n}e.exports={connect:function({user:e,database:t,connection:r}){return o.inc(4).i16(3).z(2).str(i(Object.assign({user:e,database:t,client_encoding:"'utf-8'"},r)).filter(([,e])=>e).map(([e,t])=>e+a+t).join(a)).z(2).end(0)},auth:function(e,t,r,n){if(e in l)return l[e](e,t,r,n);throw s.generic({message:"Auth type "+(c[e]||e)+" not implemented",type:c[e]||e,code:"AUTH_TYPE_NOT_IMPLEMENTED"})},Bind:function(e,t){let r;return o.B().str(a).str(e+a).i16(0).i16(t.length),t.forEach(e=>{if(null==e.value)return o.i32(4294967295);r=o.i,o.inc(4).str(e.value).i32(o.i-r-4,r)}),o.i16(0),Buffer.concat([o.end(),u])},Parse:function(e,t,r){return o.P().str(e+a).str(t+a).i16(r.length),r.forEach(e=>o.i32(e.type)),o.end()},Query:function(e){return o.Q().str(e+a).end()}}},function(e,t){e.exports=require("crypto")},function(e,t){let r=Buffer.allocUnsafe(256);const n={B:"B".charCodeAt(0),Q:"Q".charCodeAt(0),P:"P".charCodeAt(0),p:"p".charCodeAt(0)},o={i:0,B:()=>(r[0]=n.B,o.i=5,o),Q:()=>(r[0]=n.Q,o.i=5,o),P:()=>(r[0]=n.P,o.i=5,o),p:()=>(r[0]=n.p,o.i=5,o),inc:e=>(o.i+=e,o),str(e){const t=Buffer.byteLength(e);return s(t),o.i+=r.utf8Write(e,o.i,t),o},i16:e=>(s(2),r.writeUInt16BE(e,o.i),o.i+=2,o),i32:(e,t)=>t||0===t?(r.writeUInt32BE(e,t),o):(s(4),r.writeUInt32BE(e,o.i),o.i+=4,o),z:e=>(s(e),r.fill(0,o.i,o.i+e),o.i+=e,o),end(e=1){r.writeUInt32BE(o.i-e,e);const t=r.slice(0,o.i);return o.i=0,r=Buffer.allocUnsafe(256),t}};function s(e){if(r.length-o.i<e){const t=r,n=t.length;r=Buffer.allocUnsafe(n+(n>>1)+e),t.copy(r)}}e.exports=o},function(e,t,r){const{errorFields:n,errors:o,entries:s}=r(0),i=(e,[t,r])=>(e[t.charCodeAt(0)]=r,e);function a(e){const t={};let r=5;for(let o=5;o<e.length-1;o++)0===e[o]&&(t[n[e[r]]]=e.utf8Slice(r+1,o),r=o+1);return t}e.exports=function({onparse:e,onparameter:t,parsers:r,onauth:n,onready:u,transform:c,onnotice:l,onnotify:f,error:p}){let y=0;const m=s({1:function(){e()},2:function(){},3:function(){},A:function(e){if(!f)return;let t=9;for(;0!==e[t++];);f(e.utf8Slice(9,t-1),e.utf8Slice(t,e.length-1))},C:function(e){if(!m.query)return;for(let t=e.length-1;t>0;t--)if(32===e[t]&&e[t+1]<58&&null===m.query.result.count&&(m.query.result.count=+e.utf8Slice(t+1,e.length-1)),e[t-1]>=65){m.query.result.command=e.utf8Slice(5,t);break}},c:function(){},D:function(e){let t,r,n,o=7;const s={};for(let i=0;i<m.query.statement.columns.length;i++)r=m.query.statement.columns[i],t=e.readInt32BE(o),o+=4,n=-1===t?null:void 0===r.p?e.utf8Slice(o,o+=t):!0===r.p.array?r.p(e.utf8Slice(o+1,o+=t)):r.p(e.utf8Slice(o,o+=t)),s[r.n]=c.value?c.value(n):n;m.query.stream?m.query.stream(c.row?c.row(s):s,y++):m.query.result[y++]=c.row?c.row(s):s},d:function(){},E:function(e){m.query?m.error=o.generic(a(e)):p(o.generic(a(e)))},G:function(){m.error=o.notSupported("CopyInResponse")},H:function(){m.error=o.notSupported("CopyOutResponse")},I:function(){},K:function(e){d.pid=e.readInt32BE(5),d.secret=e.readInt32BE(9)},N:function(e){l?l(a(e)):console.log(a(e))},n:function(){},R:function(e){const t=e.readInt32BE(5);0!==t&&n(t,e,p)},S:function(e){const[r,n]=e.utf8Slice(5,e.length-1).split("\0");t(r,n)},s:function(){m.error=o.notSupported("PortalSuspended")},T:function(e){m.query.result.command&&(m.query.results=m.query.results||[m.query.result],m.query.results.push(m.query.result=[]),m.query.result.count=null,m.query.statement.columns=null);if(y=0,m.query.statement.columns)return;const t=e.readInt16BE(5);let n,o=7;m.query.statement.columns=Array(t);for(let s=0;s<t;++s){for(n=o;0!==e[o++];);m.query.statement.columns[s]={n:c.column?c.column(e.utf8Slice(n,o-1)):e.utf8Slice(n,o-1),p:r[e.readInt32BE(o+6)]},o+=18}},t:function(){m.error=o.notSupported("ParameterDescription")},V:function(){m.error=o.notSupported("FunctionCallResponse")},v:function(){m.error=o.notSupported("NegotiateProtocolVersion")},W:function(){m.error=o.notSupported("CopyBothResponse")},Z:function(){u(m.error)}}).reduce(i,{}),d=m.state={status:"I",pid:null,secret:null};return m}},function(e,t,r){const n=r(2);t.handler=async e=>{const t=e.queryStringParameters.for;console.log("Getting answers for "+t);const r=n({ssl:{rejectUnauthorized:!1}}),o=await(r`
    SELECT
        DISTINCT ON (postedby)
        postedby,
        who,
        answer,
        createdat
    FROM
        answers
    WHERE
        createdat > NOW() - INTERVAL '10 minutes'
        AND
        who = ${t}
    ORDER BY
        postedby, createdat DESC
    LIMIT
        5
    `);return r.end({timeout:2}),{statusCode:200,body:JSON.stringify(o)}}}]));