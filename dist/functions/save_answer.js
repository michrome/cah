!function(e,r){for(var t in r)e[t]=r[t]}(exports,function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=4)}([function(e,r,t){const n=e=>Object.keys(e).map(r=>[r,e[r]]),o=a(e.exports.types={string:{to:25,from:null,serialize:e=>""+e},number:{to:1700,from:[20,21,23,26,700,701,790,1700],serialize:e=>""+e,parse:e=>+e},json:{to:3802,from:[114,3802],serialize:e=>JSON.stringify(e),parse:e=>JSON.parse(e)},boolean:{to:16,from:[16],serialize:e=>!0===e?"t":"f",parse:e=>"t"===e},date:{to:1184,from:[1082,1083,1114,1184],serialize:e=>e.toISOString(),parse:e=>new Date(e)},bytea:{to:17,from:[17],serialize:e=>"\\x"+e.toString("hex"),parse:e=>Buffer.from(e.slice(2),"hex")}}),s=e.exports.serializers=o.serializers,i=e.exports.parsers=o.parsers;function a(e){return Object.keys(e).reduce((r,t)=>(e[t].from&&e[t].from.forEach(n=>r.parsers[n]=e[t].parse),r.serializers[e[t].to]=e[t].serialize,r),{parsers:{},serializers:{}})}e.exports.entries=n,e.exports.mergeUserTypes=function(e){const r=a(e||{});return{serializers:Object.assign({},s,r.serializers),parsers:Object.assign({},i,r.parsers)}};const c={number:1700,boolean:16};e.exports.escape=function(e){let r,t="",n=e[0]<10||"$"===e[0],o=0;for(let s=0;s<e.length;s++)r=e[s].charCodeAt(0),'"'===e[s]?(n=!0,t+=e.slice(o,s)+'"',o=s):(96===r||36!==r&&r<=47||r>=58&&r<=64||r>=91&&r<=94||r>=123&&r<=128)&&(n=!0);return(n?'"':"")+(n?t+e.slice(o,e.length):e)+(n?'"':"")},e.exports.inferType=function e(r){return r&&r.type||(r instanceof Date?1184:Array.isArray(r)?e(r[0]):r instanceof Buffer?17:c[typeof r]||0)};const u=/\\/g,l=/"/g;e.exports.arraySerializer=function e(r,t){if(!r.length)return"{}";const n=r[0];return Array.isArray(n)&&!n.type?"{"+r.map(r=>e(r,t)).join(",")+"}":"{"+r.map(e=>'"'+function(e){return e.replace(u,"\\\\").replace(l,'\\"')}(t?t(e.type?e.value:e):""+e)+'"').join(",")+"}"};const f={i:0,char:null,str:"",quoted:!1,last:0};e.exports.arrayParser=function(e,r){return f.i=f.last=0,function e(r,t,n){const o=[];for(;r.i<t.length;r.i++){if(r.char=t[r.i],r.quoted)"\\"===r.char?r.str+=t[++r.i]:'"'===r.char?(o.push(n?n(r.str):r.str),r.str="",r.quoted='"'===t[r.i+1],r.last=r.i+2):r.str+=r.char;else if('"'===r.char)r.quoted=!0;else if("{"===r.char)r.last=++r.i,o.push(e(r,t,n));else{if("}"===r.char){r.quoted=!1,r.last<r.i&&o.push(n?n(t.slice(r.last,r.i)):t.slice(r.last,r.i)),r.last=r.i+1;break}","===r.char&&"}"!==r.p&&'"'!==r.p&&(o.push(n?n(t.slice(r.last,r.i)):t.slice(r.last,r.i)),r.last=r.i+1)}r.p=r.char}return r.last<r.i&&o.push(n?n(t.slice(r.last,r.i+1)):t.slice(r.last,r.i+1)),o}(f,e,r)},e.exports.toCamel=e=>{let r=e[0];for(let t=1;t<e.length;t++)r+="_"===e[t]?e[++t].toUpperCase():e[t];return r},e.exports.toPascal=e=>{let r=e[0].toUpperCase();for(let t=1;t<e.length;t++)r+="_"===e[t]?e[++t].toUpperCase():e[t];return r},e.exports.toKebab=e=>e.replace(/_/g,"-"),e.exports.errors={connection:(e,r)=>Object.assign(new Error("write CONNECTION_"+e+" "+r.path||!1),{code:"CONNECTION_"+e,errno:"CONNECTION_"+e,address:r.path||r.host},r.path?{}:{port:r.port}),generic:e=>Object.assign(new Error(e.message),e),notSupported:e=>Object.assign(new Error(e+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED"})},e.exports.errorFields=n({S:"severity_local",V:"severity",C:"code",M:"message",D:"detail",H:"hint",P:"position",p:"internal_position",q:"internal_query",W:"where",s:"schema_name",t:"table_name",c:"column_name",d:"data type_name",n:"constraint_name",F:"file",L:"line",R:"routine"}).reduce((e,[r,t])=>(e[r.charCodeAt(0)]=t,e),{})},function(e,r){e.exports=function(){let e=[],r=0;return{get length(){return e.length-r},push:r=>e.push(r),peek:()=>e[r],shift:()=>{const t=e[r++];return r===e.length?(r=0,e=[]):e[r-1]=void 0,t}}}},,,function(e,r,t){const n=t(5),o=t(9);r.handler=async e=>{const r=n.parse(e.body);console.log("To: "+r.who),console.log("From: "+r.postedBy),console.log("Answer: "+r.answer);const t=e.headers.referer,s=o({ssl:{rejectUnauthorized:!1}}),i=await(s`INSERT INTO answers (who, postedby, answer) VALUES (${r.who}, ${r.postedBy}, ${r.answer})`);return console.log(i),{statusCode:302,body:JSON.stringify(e),headers:{Location:t}}}},function(e,r,t){"use strict";const n=t(6),o=t(7),s=t(8);function i(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function a(e,r){return r.encode?r.strict?n(e):encodeURIComponent(e):e}function c(e,r){return r.decode?o(e):e}function u(e){const r=e.indexOf("#");return-1!==r&&(e=e.slice(0,r)),e}function l(e){const r=(e=u(e)).indexOf("?");return-1===r?"":e.slice(r+1)}function f(e,r){return r.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!r.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function p(e,r){i((r=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},r)).arrayFormatSeparator);const t=function(e){let r;switch(e.arrayFormat){case"index":return(e,t,n)=>{r=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),r?(void 0===n[e]&&(n[e]={}),n[e][r[1]]=t):n[e]=t};case"bracket":return(e,t,n)=>{r=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),r?void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=[t]:n[e]=t};case"comma":case"separator":return(r,t,n)=>{const o="string"==typeof t&&t.split("").indexOf(e.arrayFormatSeparator)>-1?t.split(e.arrayFormatSeparator).map(r=>c(r,e)):null===t?t:c(t,e);n[r]=o};default:return(e,r,t)=>{void 0!==t[e]?t[e]=[].concat(t[e],r):t[e]=r}}}(r),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;for(const o of e.split("&")){let[e,i]=s(r.decode?o.replace(/\+/g," "):o,"=");i=void 0===i?null:["comma","separator"].includes(r.arrayFormat)?i:c(i,r),t(c(e,r),i,n)}for(const e of Object.keys(n)){const t=n[e];if("object"==typeof t&&null!==t)for(const e of Object.keys(t))t[e]=f(t[e],r);else n[e]=f(t,r)}return!1===r.sort?n:(!0===r.sort?Object.keys(n).sort():Object.keys(n).sort(r.sort)).reduce((e,r)=>{const t=n[r];return Boolean(t)&&"object"==typeof t&&!Array.isArray(t)?e[r]=function e(r){return Array.isArray(r)?r.sort():"object"==typeof r?e(Object.keys(r)).sort((e,r)=>Number(e)-Number(r)).map(e=>r[e]):r}(t):e[r]=t,e},Object.create(null))}r.extract=l,r.parse=p,r.stringify=(e,r)=>{if(!e)return"";i((r=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},r)).arrayFormatSeparator);const t=t=>r.skipNull&&null==e[t]||r.skipEmptyString&&""===e[t],n=function(e){switch(e.arrayFormat){case"index":return r=>(t,n)=>{const o=t.length;return void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,[a(r,e),"[",o,"]"].join("")]:[...t,[a(r,e),"[",a(o,e),"]=",a(n,e)].join("")]};case"bracket":return r=>(t,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,[a(r,e),"[]"].join("")]:[...t,[a(r,e),"[]=",a(n,e)].join("")];case"comma":case"separator":return r=>(t,n)=>null==n||0===n.length?t:0===t.length?[[a(r,e),"=",a(n,e)].join("")]:[[t,a(n,e)].join(e.arrayFormatSeparator)];default:return r=>(t,n)=>void 0===n||e.skipNull&&null===n||e.skipEmptyString&&""===n?t:null===n?[...t,a(r,e)]:[...t,[a(r,e),"=",a(n,e)].join("")]}}(r),o={};for(const r of Object.keys(e))t(r)||(o[r]=e[r]);const s=Object.keys(o);return!1!==r.sort&&s.sort(r.sort),s.map(t=>{const o=e[t];return void 0===o?"":null===o?a(t,r):Array.isArray(o)?o.reduce(n(t),[]).join("&"):a(t,r)+"="+a(o,r)}).filter(e=>e.length>0).join("&")},r.parseUrl=(e,r)=>({url:u(e).split("?")[0]||"",query:p(l(e),r)}),r.stringifyUrl=(e,t)=>{const n=u(e.url).split("?")[0]||"",o=r.extract(e.url),s=r.parse(o),i=function(e){let r="";const t=e.indexOf("#");return-1!==t&&(r=e.slice(t)),r}(e.url),a=Object.assign(s,e.query);let c=r.stringify(a,t);return c&&(c="?"+c),`${n}${c}${i}`}},function(e,r,t){"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,e=>"%"+e.charCodeAt(0).toString(16).toUpperCase())},function(e,r,t){"use strict";var n=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function s(e,r){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;r=r||1;var t=e.slice(0,r),n=e.slice(r);return Array.prototype.concat.call([],s(t),s(n))}function i(e){try{return decodeURIComponent(e)}catch(o){for(var r=e.match(n),t=1;t<r.length;t++)r=(e=s(r,t).join("")).match(n);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(r){return function(e){for(var r={"%FE%FF":"��","%FF%FE":"��"},t=o.exec(e);t;){try{r[t[0]]=decodeURIComponent(t[0])}catch(e){var n=i(t[0]);n!==t[0]&&(r[t[0]]=n)}t=o.exec(e)}r["%C2"]="�";for(var s=Object.keys(r),a=0;a<s.length;a++){var c=s[a];e=e.replace(new RegExp(c,"g"),r[c])}return e}(e)}}},function(e,r,t){"use strict";e.exports=(e,r)=>{if("string"!=typeof e||"string"!=typeof r)throw new TypeError("Expected the arguments to be of type `string`");if(""===r)return[e];const t=e.indexOf(r);return-1===t?[e]:[e.slice(0,t),e.slice(t+r.length)]}},function(e,r,t){const n=t(10),o=t(11),s=t(12),i=t(13),a=t(1),{mergeUserTypes:c,arraySerializer:u,arrayParser:l,inferType:f,toPascal:p,entries:y,toCamel:m,toKebab:d,errors:h,escape:g,types:b}=t(0),S={P:{},finally:w,then:w,catch:w};function w(){throw h.generic({message:"Query not called as a tagged template literal",code:"NOT_TAGGED_CALL"})}function x(e,r){if(arguments.length&&!e)throw new Error(e+" - is not a url or connection object");const t=j(e,r),n=Math.max(1,t.max),s=a(),c=[],p=a(),m={},d={},w={},x=/(^|[^)(])\s*insert\s+into\s+[^\s]+\s*$/i,v=/(^|[^)(])\s*select\s*$/i;let O,E,A=!1,P=null,q=n;function C(e){return I({},z(),e,Array.from(arguments).slice(1))}Object.assign(C,{options:Object.assign({},t,{pass:null}),parameters:{},listen:G,begin:T,end:Q}),$(C);const B=t.onparameter;return t.onparameter=(e,r)=>{C.parameters[e]!==r&&(C.parameters[e]=r,B&&B(e,r))},C;function T(e,r){return r||(r=e,e=""),new Promise((t,n)=>{const o=z(!0),s={resolve:t,reject:n,fn:r,begin:"begin "+e.replace(/[^a-z ]/gi,"")};o?_(s,o):p.push(s)})}function _({resolve:e,reject:r,fn:t,begin:n="",savepoint:o=""},i){function a(e){return I({},i,e,Array.from(arguments).slice(1))}n&&(i.savepoints=0),$(a,i),a.savepoint=(e,r)=>new Promise((t,n)=>{_({savepoint:"savepoint s"+i.savepoints+++"_"+(r?e:""),resolve:t,reject:n,fn:r||e},i)}),I({raw:!0},i,n||o).then(()=>{const e=t(a);return Array.isArray(e)?Promise.all(e):e}).then(r=>n?a`commit`.then(()=>e(r)):e(r)).catch(e=>{I({raw:!0},i,n?"rollback":"rollback to "+o).then(()=>r(e))}).then(n&&(()=>{s.push(i),N()}))}function N(){let e,r;for(;p.length&&(e=z(p.peek().fn))&&(r=p.shift());)r.fn?_(r,e):U(e,r.query,r.xs,r.args)}function I(e,r,n,o){if(!(e.raw||Array.isArray(n)&&Array.isArray(n.raw)))return k(n,o);const s=new Promise((s,i)=>{e.resolve=s,e.reject=i,null!==P?i(h.connection("ENDED",t)):A?U(r,e,n,o):M(r).then(()=>U(r,e,n,o)).catch(i)});return s.stream=r=>(e.stream=r,s),s}function k(e,r){const t=Object.create(S);return t.first=e,t.rest=r,t}function U(e,r,t,n){e?e.send(r,r.raw?K(t,n):V(r,t,n)):p.push({query:r,xs:t,args:n})}function z(e){const r=q?R(t):s.shift();return!e&&r&&s.push(r),r}function R(e){q--;const r=i(e);return c.push(r),r}function F(e){return{type:f(e)||25,array:!0,value:e}}function L(e){return{type:b.json.to,value:e}}function M(e){return O||(O=new Promise((r,t)=>{U(e,{resolve:r,reject:t,raw:!0},"\n          select oid, typelem\n          from pg_catalog.pg_type\n          where typcategory = 'A'\n        ")}).then(e=>{e.forEach(({oid:e,typelem:r})=>D(e,r)),A=!0}))}function D(e,r){const n=t.parsers[r];d[r]=e,t.parsers[e]=e=>l(e,n),t.parsers[e].array=!0,t.serializers[e]=e=>u(e,t.serializers[r])}function $(e,r){Object.assign(e,{types:{},notify:function(r,t){return e`select pg_notify(${r}, ${""+t})`},unsafe:function(e,t){return I({raw:!0,simple:!t,dynamic:!0},r||z(),e,t||[])},array:F,file:function(e,t,n={}){Array.isArray(t)||(n=t||{},t=null);"cache"in n==!1&&(n.cache=!0);const s=w[e],i={raw:!0,simple:!t};if(n.cache&&"string"==typeof s)return I(i,r||z(),s,t||[]);const a=(n.cache&&s||(w[e]=new Promise((r,t)=>{o.readFile(e,"utf8",(n,o)=>{if(n)return t(n);w[e]=o,r(o)})}))).then(e=>I(i,r||z(),e,t||[]));return a.stream=e=>(i.stream=e,a),a},json:L}),t.types&&y(t.types).forEach(([r,t])=>{e.types[r]=e=>({type:t.to,value:e})})}function G(e,r){return e in m?(m[e].push(r),Promise.resolve(e)):(m[e]=[r],I({raw:!0},H(),"listen "+g(e)).then(()=>e))}function H(){return E||(E=i(Object.assign({},t,{onnotify:(e,r)=>e in m&&m[e].forEach(e=>e(r))})),c.push(E),E)}function Q({timeout:e=null}={}){if(P)return P;let r;return P=0===e?Promise.all(c.map(e=>e.destroy())).then(()=>{}):Promise.race([Promise.all(c.map(e=>e.end()))].concat(e>0?new Promise(t=>r=setTimeout(()=>(c.map(e=>e.destroy()),t()),1e3*e)):[])).then(()=>clearTimeout(r))}function K(e,r=[]){const t=[],n=r.map(e=>{const r=te(e);return t.push(r.type),r});return{sig:t+e,str:e,args:n}}function V(e,r,t=[]){const n=[],o=[];let s,i=r[0];for(let e=1;e<r.length;e++)s=t[e-1],i+=(s&&s.P===S.P?W(i,s,n,o):ee(s,n,o))+r[e];return{sig:!e.dynamic&&!n.dynamic&&o+i,str:i.trim(),args:n}}function W(e,{first:r,rest:t},n,o){if(n.dynamic=!0,null!==r&&"object"==typeof r&&"string"!=typeof r[0]){if(x.test(e))return X(r,t,n,o);if(v.test(e))return J(r,t,n,o);if(!Array.isArray(r))return Y(r,t,n,o)}return Z(Array.isArray(r)?r:[r].concat(t))}function J(e,r,t,n){return y(e).reduce((e,[o,s])=>e+(!r.length||r.indexOf(o)>-1?(e?",":"")+ee(s,t,n)+" as "+g(o):""),"")}function X(e,r,t,n){return e=Array.isArray(e)?e:[e],"("+Z(r=r.length?r:Object.keys(e[0]))+") values "+e.reduce((e,o)=>e+(e?",":"")+"("+r.reduce((e,r)=>e+(e?",":"")+ee(o[r],t,n),"")+")","")}function Y(e,r,t,n){return(r.length?r:Object.keys(e)).reduce((r,o)=>r+(r?",":"")+g(o)+" = "+ee(e[o],t,n),"")}function Z(e){return e.reduce((e,r)=>e+(e?",":"")+g(r),"")}function ee(e,r,t){return Array.isArray(e)?e.reduce((e,n)=>e+(e?",":"")+re(n,r,t),""):re(e,r,t)}function re(e,r,t){const n=te(e),o=t.push(n.type);if(o>65534)throw h.generic({message:"Max number of parameters (65534) exceeded",code:"MAX_PARAMETERS_EXCEEDED"});return r.push(n),"$"+o}function te(e){if(null==e)return{type:0,value:e};const r=e.type?e.value:e,n=e.array?d[e.type]:e.type||f(r);return{type:n,value:(t.serializers[n]||b.string.serialize)(r)}}}function j(e,r){const t=process.env,o="string"==typeof e?s.parse(e,!0):{query:{},pathname:""},i=("string"==typeof e?r:e)||{},a=(o.auth||"").split(":"),u=i.hostname||i.host||o.hostname||t.PGHOST||"localhost",l=i.port||o.port||t.PGPORT||5432;return Object.assign({host:u,port:l,path:i.path||u.indexOf("/")>-1&&u+"/.s.PGSQL."+l,database:i.database||i.db||(o.pathname||"").slice(1)||t.PGDATABASE||"postgres",user:i.user||i.username||a[0]||t.PGUSERNAME||t.PGUSER||n.userInfo().username,pass:i.pass||i.password||a[1]||t.PGPASSWORD||"",max:i.max||o.query.max||Math.max(1,n.cpus().length),types:i.types||{},ssl:i.ssl||o.ssl||!1,timeout:i.timeout,onnotice:i.onnotice,onparameter:i.onparameter,transform:Object.assign({},i.transform),connection:Object.assign({application_name:"postgres.js"},i.connection),debug:i.debug},c(i.types))}Object.assign(x,{toPascal:p,toCamel:m,toKebab:d}),e.exports=x},function(e,r){e.exports=require("os")},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("url")},function(e,r,t){const n=t(14),o=t(15),s=t(16),i=t(19),a=t(1),{errors:c}=t(0);e.exports=function(e={}){const{onparameter:r,transform:t,timeout:l,onnotify:f,onnotice:p,parsers:y}=e;let m,d,h=Buffer.alloc(0),g=0,b=[],S=1,w=!1,x=!1,j={};const v=a(),O=u++,E={send:function(r,{sig:t,str:n,args:o=[]}){r.result=[],r.result.count=null,l&&clearTimeout(m),e.debug&&e.debug(O,n,o);const i=r.simple?function(e,r){return r.statement={},s.Query(e)}(n,r):t in j?function(e,r,t){return t.statement=e,s.Bind(e.name,r)}(j[t],o,r):function(e,r,t,n){return n.statement={name:e?"p"+S++:"",sig:e},Buffer.concat([s.Parse(n.statement.name,r,t),s.Bind(n.statement.name,t)])}(t,n,o,r);x?(P.query=r,x=!1):v.push(r),w?A.write(i):(b.push(i),A.connect())},end:function(){clearTimeout(m);const e=new Promise(e=>{d=()=>e(A.end())});P.query||0!==v.length||d();return e},destroy:function(){q(c.connection("DESTROYED",e)),A.destroy()}},A=function(e,{error:r,close:t,ready:s,data:i}){let a,c,u=!0,l=null;function f(){a.removeListener("data",i),a.removeListener("error",r),a.removeListener("connect",s),a.removeListener("secureConnect",s),u=!0,t()}function p(e){a=e,a.on("data",i),a.once("error",r),a.once("connect",s),a.once("secureConnect",s),a.once("close",f)}function y(){a.write(c),null!==l&&clearImmediate(l),c=l=null}return{ready:!1,write:e=>{if(c=c?Buffer.concat([c,e]):Buffer.from(e),c.length>=1024)return y();null===l&&(l=setImmediate(y))},destroy:()=>(a&&a.destroy(),Promise.resolve()),end:()=>new Promise(e=>a&&a.end(e)),connect:function(){if(!u)return;u=!1;const t=e.path?n.connect(e.path):n.connect(e.port,e.host);if(!e.ssl)return p(t);t.once("connect",()=>t.write(Buffer.from("0000000804d2162f","hex"))),t.once("error",r),t.once("close",f),t.once("data",n=>{t.removeListener("error",r),t.removeListener("close",f),"S"===n.toString()?p(o.connect(Object.assign({socket:t},e.ssl))):r("Server does not support SSL")})}}}(e,{ready:()=>A.write(s.connect(e)),data:function(e){h=0===h.length?e:Buffer.concat([h,e],h.length+e.length);for(;h.length>4&&(g=h.readInt32BE(1),!(g>=h.length));)P[h[0]](h.slice(0,g+1)),h=h.slice(g+1)},error:q,close:function(){q(c.connection("CLOSED",e)),j={},w=x=!1}}),P=i({onparse:function(){P.query&&P.query.statement.sig&&(j[P.query.statement.sig]=P.query.statement)},onparameter:r,transform:t,parsers:y,onnotify:f,onnotice:p,onready:function(e){if(e?P.query?P.query.reject(e):q(e):P.query&&P.query.resolve(P.query.results||P.query.result),P.query=P.error=null,l&&0===v.length&&C(),0===v.length&&d)return d();w||(b.forEach(A.write),b=[],w=!0);P.query=v.shift(),x=!P.query},onauth:function(r,t,n){Promise.resolve("function"==typeof e.pass?e.pass():e.pass).then(n=>A.write(s.auth(r,t,e,n))).catch(n)},error:q});function q(e){let r;for(;r=v.shift();)r.reject(e)}function C(){clearTimeout(m),m=setTimeout(A.end,1e3*l)}return E};let u=1},function(e,r){e.exports=require("net")},function(e,r){e.exports=require("tls")},function(e,r,t){const n=t(17),o=t(18),{errors:s,entries:i}=t(0),a=String.fromCharCode(0),c=o.inc(5).str("D").i32(6).str("P").str(a).str("E").i32(9).z(5).str("H").i32(4).str("S").i32(4).end().slice(5),u={2:"KerberosV5",3:"CleartextPassword",5:"MD5Password",6:"SCMCredential",7:"GSS",8:"GSSContinue",9:"SSPI",10:"SASL",11:"SASLContinue",12:"SASLFinal"},l={3:function(e,r,t,n){return o.p().str(n).z(1).end()},5:function(e,r,t,n){return o.p().str("md5"+f(Buffer.concat([Buffer.from(f(n+t.user)),r.slice(9)]))).z(1).end()},10:function(e,r,t){o.p().str("SCRAM-SHA-256"+a);const s=o.i;return t.nonce=n.randomBytes(18).toString("base64"),o.inc(4).str("n,,n=*,r="+t.nonce).i32(o.i-s-4,s).end()},11:function(e,r,t,s){const i=r.utf8Slice(9).split(",").reduce((e,r)=>(e[r[0]]=r.slice(2),e),{}),a=n.pbkdf2Sync(s,Buffer.from(i.s,"base64"),parseInt(i.i),32,"sha256"),c=p(a,"Client Key"),u="n=*,r="+t.nonce+",r="+i.r+",s="+i.s+",i="+i.i+",c=biws,r="+i.r;return t.serverSignature=p(p(a,"Server Key"),u).toString("base64"),o.p().str("c=biws,r="+i.r+",p="+m(c,p(y(c),u)).toString("base64")).end()},12:function(e,r,t){if(r.utf8Slice(9).split(a,1)[0].slice(2)===t.serverSignature)return"";throw s.generic({message:"The server did not return the correct signature",code:"SASL_SIGNATURE_MISMATCH"})}};function f(e){return n.createHash("md5").update(e).digest("hex")}function p(e,r){return n.createHmac("sha256",e).update(r).digest()}function y(e){return n.createHash("sha256").update(e).digest()}function m(e,r){const t=Math.max(e.length,r.length),n=Buffer.allocUnsafe(t);for(let o=0;o<t;o++)n[o]=e[o]^r[o];return n}e.exports={connect:function({user:e,database:r,connection:t}){return o.inc(4).i16(3).z(2).str(i(Object.assign({user:e,database:r,client_encoding:"'utf-8'"},t)).filter(([,e])=>e).map(([e,r])=>e+a+r).join(a)).z(2).end(0)},auth:function(e,r,t,n){if(e in l)return l[e](e,r,t,n);throw s.generic({message:"Auth type "+(u[e]||e)+" not implemented",type:u[e]||e,code:"AUTH_TYPE_NOT_IMPLEMENTED"})},Bind:function(e,r){let t;return o.B().str(a).str(e+a).i16(0).i16(r.length),r.forEach(e=>{if(null==e.value)return o.i32(4294967295);t=o.i,o.inc(4).str(e.value).i32(o.i-t-4,t)}),o.i16(0),Buffer.concat([o.end(),c])},Parse:function(e,r,t){return o.P().str(e+a).str(r+a).i16(t.length),t.forEach(e=>o.i32(e.type)),o.end()},Query:function(e){return o.Q().str(e+a).end()}}},function(e,r){e.exports=require("crypto")},function(e,r){let t=Buffer.allocUnsafe(256);const n={B:"B".charCodeAt(0),Q:"Q".charCodeAt(0),P:"P".charCodeAt(0),p:"p".charCodeAt(0)},o={i:0,B:()=>(t[0]=n.B,o.i=5,o),Q:()=>(t[0]=n.Q,o.i=5,o),P:()=>(t[0]=n.P,o.i=5,o),p:()=>(t[0]=n.p,o.i=5,o),inc:e=>(o.i+=e,o),str(e){const r=Buffer.byteLength(e);return s(r),o.i+=t.utf8Write(e,o.i,r),o},i16:e=>(s(2),t.writeUInt16BE(e,o.i),o.i+=2,o),i32:(e,r)=>r||0===r?(t.writeUInt32BE(e,r),o):(s(4),t.writeUInt32BE(e,o.i),o.i+=4,o),z:e=>(s(e),t.fill(0,o.i,o.i+e),o.i+=e,o),end(e=1){t.writeUInt32BE(o.i-e,e);const r=t.slice(0,o.i);return o.i=0,t=Buffer.allocUnsafe(256),r}};function s(e){if(t.length-o.i<e){const r=t,n=r.length;t=Buffer.allocUnsafe(n+(n>>1)+e),r.copy(t)}}e.exports=o},function(e,r,t){const{errorFields:n,errors:o,entries:s}=t(0),i=(e,[r,t])=>(e[r.charCodeAt(0)]=t,e);function a(e){const r={};let t=5;for(let o=5;o<e.length-1;o++)0===e[o]&&(r[n[e[t]]]=e.utf8Slice(t+1,o),t=o+1);return r}e.exports=function({onparse:e,onparameter:r,parsers:t,onauth:n,onready:c,transform:u,onnotice:l,onnotify:f,error:p}){let y=0;const m=s({1:function(){e()},2:function(){},3:function(){},A:function(e){if(!f)return;let r=9;for(;0!==e[r++];);f(e.utf8Slice(9,r-1),e.utf8Slice(r,e.length-1))},C:function(e){if(!m.query)return;for(let r=e.length-1;r>0;r--)if(32===e[r]&&e[r+1]<58&&null===m.query.result.count&&(m.query.result.count=+e.utf8Slice(r+1,e.length-1)),e[r-1]>=65){m.query.result.command=e.utf8Slice(5,r);break}},c:function(){},D:function(e){let r,t,n,o=7;const s={};for(let i=0;i<m.query.statement.columns.length;i++)t=m.query.statement.columns[i],r=e.readInt32BE(o),o+=4,n=-1===r?null:void 0===t.p?e.utf8Slice(o,o+=r):!0===t.p.array?t.p(e.utf8Slice(o+1,o+=r)):t.p(e.utf8Slice(o,o+=r)),s[t.n]=u.value?u.value(n):n;m.query.stream?m.query.stream(u.row?u.row(s):s,y++):m.query.result[y++]=u.row?u.row(s):s},d:function(){},E:function(e){m.query?m.error=o.generic(a(e)):p(o.generic(a(e)))},G:function(){m.error=o.notSupported("CopyInResponse")},H:function(){m.error=o.notSupported("CopyOutResponse")},I:function(){},K:function(e){d.pid=e.readInt32BE(5),d.secret=e.readInt32BE(9)},N:function(e){l?l(a(e)):console.log(a(e))},n:function(){},R:function(e){const r=e.readInt32BE(5);0!==r&&n(r,e,p)},S:function(e){const[t,n]=e.utf8Slice(5,e.length-1).split("\0");r(t,n)},s:function(){m.error=o.notSupported("PortalSuspended")},T:function(e){m.query.result.command&&(m.query.results=m.query.results||[m.query.result],m.query.results.push(m.query.result=[]),m.query.result.count=null,m.query.statement.columns=null);if(y=0,m.query.statement.columns)return;const r=e.readInt16BE(5);let n,o=7;m.query.statement.columns=Array(r);for(let s=0;s<r;++s){for(n=o;0!==e[o++];);m.query.statement.columns[s]={n:u.column?u.column(e.utf8Slice(n,o-1)):e.utf8Slice(n,o-1),p:t[e.readInt32BE(o+6)]},o+=18}},t:function(){m.error=o.notSupported("ParameterDescription")},V:function(){m.error=o.notSupported("FunctionCallResponse")},v:function(){m.error=o.notSupported("NegotiateProtocolVersion")},W:function(){m.error=o.notSupported("CopyBothResponse")},Z:function(){c(m.error)}}).reduce(i,{}),d=m.state={status:"I",pid:null,secret:null};return m}}]));